<?php
	set_time_limit( 2*60*60 );
	$f_last_id=@fopen("last_id_go.txt","r");
	if($f_last_id)
	{
		$last_id = fgets($f_last_id);
		fclose($f_last_id);
	}
	else 
		$last_id = 1000000;
	$go_entries_containers="202065,179547,193201,193200,207424,119,191180,181802,202775,105169,192825,1166,193905,175565,203311,203280,203279,203229,195674,2714,193944,193946,193945,193943,186734,186744,186885,41,2912,205534,190459,176785,20807,126260,186640,195455,190552,190461,175889,192910,192909,192912,192911,179562,202420,181683,333,17783,195513,195657,195656,195658,195659,206393,141979,207301,103600,182166,206388,195602,207389,188462,185911,186679,180523,206410,181892,177241,203283,184115,181074,179697,195665,3660,142344,203048,186672,30854,37099,207281,177789,152620,203132,181594,181644,184870,184869,202533,201971,123329,92420,2891,102985,190625,205423,203800,196808,203977,203979,3659,3705,205422,206580,3706,19598,182063,181053,17282,205879,205880,205881,2843,205878,203089,192243,190584,177785,203088,175207,194100,201706,20726,1594,192788,175334,202470,104575,104566,104565,104564,102984,202703,196403,194424,186301,204388,204437,204389,188670,173232,175330,175331,175329,194238,202574,195535,182265,191182,203209,181891,176213,187333,184504,164958,204433,2086,2087,204399,204398,57,187902,201905,181593,164658,20920,201924,185497,103662,205476,194433,18036,204280,188260,19019,202321,176092,182050,184031,206689,196834,113768,202324,195136,175264,205246,201737,201738,186950,176793,187886,195055,58595,203047,182095,185226,185225,185224,191349,193603,194789,195046,204120,204133,194312,201959,179703,184465,194307,171938,2712,187027,176215,202323,105175,180917,203017,142184,28024,2743,186302,13359,204377,204374,205208,204375,204376,204378,192556,189298,195692,195240,181681,204297,204296,195709,195631,181963,194787,203224,202846,191531,191537,191530,191536,191535,191534,191533,191532,3238,105174,2742,2739,2740,169243,2741,205154,190462,207293,190540,2884,142076,201384,181746,206758,207294,203312,203138,184716,178784,185033,192171,192172,19283,188442,202560,195323,201701,125477,195138,179553,207256,181771,181770,182127,2554,187689,187697,190537,194432,1586,206996,86492,207162,249,182011,202320,202968,195201,21277,175708,201778,190474,206706,192908,204401,190463,188140,192828,195206,206905,182184,182185,192773,92423,174728,186273,178464,160845,206573,165738,206659,179828,207500,207496,207498,207497,190663,193597,186325,202705,187264,175385,202080,176206,194431,182119,190541,190542,190543,85563,207126,11713,202241,202239,207381,207383,207382,207384,203387,19541,17155,21052,196395,195075,195076,195531,181238,186266,184589,161527,182256,182031,195344,202160,202159,202158,205560,205076,191708,201871,103821,176344,190483,190484,184607,176753,175382,207188,182581,182583,22550,184689,181981,186618,206673,206389,206672,182606,188499,192826,188525,188461,191458,203205,203206,203204,179004,191843,3767,19597,181680,190208,182128,185119,206499,206420,206498,196465,196466,194340,194341,206890,179565,1571,204282,186632,195374,191773,191770,186886,203374,203216,203214,203215,189976,195601,207145,202649,183933,206298,206297,206295,206299,192676,188650,188646,206764,181283,181628,190937,175966,194107,183945,164662,183814,183813,184560,183767,184948,193997,192191,192190,192189,192187,192192,192188,164798,2867,205827,182507,182505,182506,52,161513,187673,175245,177964,21145,21146,21147,21148,185302,1673,181894,181671,181798,184860,184862,183935,184859,206882,184980,148499,178085,178084,181804,179559,203182,179516,182139,205099,180905,203099,203100,203101,203103,203104,203102,203097,202876,188120,175949,103574,202651,187980,3743,203247,187899,187901,187900,187898,187897,186946,9630,202619,142185,142187,142186,142188,205558,195080,190447,3662,193196,185032,175322,201608,189306,206783,205363,206836,181366,175488,204425,3768,203972,194566,166863,194349,194324,188113,175324,175965,179025,203385,192127,181287,190465,186750,182116,192823,194208,194209,290,177926,140971,188518,204580,124388,19595,3646,191181,2744,177784,196462,194821,20727,203032,190560,154357,181151,195021,175566,182053,181574,190561,203170,204345,204346,204347,204350,3236,195623,186633,186634,192944,173266,179564,144064,143980,196472,191815,191814,164659,195042,58,165739,186263,182941,204000,188702,185567,185152,181645,206658,194126,202179,202178,202180,201873,202177,1165,187885,205051,190480,192824,2560,195205,190633,180654,186748,187021,186828,180372,180371,180370,180373,190720,188600,185954,203230,200298,194158,194159,201367,165554,207893,207891,93192,181800,181372,19861,2039,191092,188705,194090,194089,194088,175888,199332,199331,199330,199329,175384,205892,205891,205890,1759,141931,178553,178609,181696,181629,188602,188237,188236,188238,203281,142191,203409,176208,192082,192081,192552,207184,207183,207182,152094,202969,187892,188192,190482,203373,182122,196835,3237,179644,175928,203188,175785,207259,204091,186955,184834,206852,204014,192818,201592,190938,89634,195448,186684,195447,85562,178785,207105,187674,184443,204253,192945,202441,175628,91138,188434,176145,203762,202754,191568,202864,201801,201798,202863,201802,201800,201803,201799,202552,202554,202553,195492,202137,203253,188164,188066,195686,182199,176630,201611,203113,202567,1727,201610,201609,176634,201579,182355,153123,179501,190466,176751,152608,3642,201594,184121,184122,184123,186667,124389,203294,164690,202648,204827,204826,263,3640,186954,75293,131979,180690,74448,177464,201704,185128,190702,201937,202731,204432,196473,195587,195135,187026,186938,202793,331,181687,177750,272,126049,185569,2707,2709,206532,195515,176112,192693,191567,186729,184619,184622,184433,177804,207522,207520,207529,207528,207524,207521,207523,202422,1562,182600,149036,185220,12654,182069,190534,206408,203175,203174,203176,181898,195074,195440,184466,161557,271,188263,188262,205144,175166,190578,19905,19904,19906,186736,204360,195077,201914,152095,207346,205477,175407,205479,204087,190696,187022,203151,195054,190399,204591,190478,1723,190394,178227,189295,202322,2084,176150,201904,182804,204017,19284,204336,204587,205092,181675,181674,203396,182532,203228,206591,206588,206584,205216,207973,203078,184077,185939,185182,185915,191084,190947,203071,181138,181139,181140,180435,205137,202405,188703,206321,206531,206853,179499,203982,201607,176944,182541,182601,190189,203989,205537,178325,190624,207187,192058,203394,203392,203393,206946,164910,205251,182258,195111,185015,207421,207423,207422,205195,176116,176142,176143,190623,206411,37098,190467,185900,193199,179914,204424,181697,204462,204464,179915,203139,203130,203129,179832,207124,2858,2842,2848,203019,203022,202263,203021,13949,186390,205060,196809,187683,190562,188367,176360,194202,205153,206503,176248,203969,190468,207158,193561,193560,190477,2068,190481,201794,177747,188603,206664,190778,190469,201974,194200,181133,181385,202082,185541,202083,187072,186662,164660,103820,176207,204352,185168,160836,201603,178104,205055,182584,2883,103664,190660,202957,202956,202961,202958,202960,202959,19868,202351,148842,204457,205559,184795,184796,175886,189992,188489,181893,149481,149480,149482,149483,207533,207542,207540,207535,207534,193402,19021,203172,50936,203801,50935,22245,2724,50937,206203,186607,188530,176356,205824,186831,186830,186832,187875,205989,182937,182797,182938,182798,182936,182799,202896,181854,190533,183385,178184,190691,181916,193197,164,11714,203453,180691,188658,188676,188675,188677,188659,28604,202884,176249,191782,191783,191781,191780,187677,190223,202325,144053,180511,189291,190354,182542,184811,184812,184813,184815,184814,184810,181839,181845,181843,181846,181837,181833,181768,181848,181847,181841,190476,204016,179826,161495,203179,13891,194263,193417,193418,201572,181637,113757,184691,204102,128308,193792,193767,193793,176209,144054,176582,188345,276,190558,192942,192943,188018,188015,188017,188016,1736,196810,206583,183934,190464,202477,202478,206652,206651,206644,188671,195037,3685,207512,207513,207517,207519,207518,175165,207474,207478,207480,207479,207476,207477,207475,207473,207472,202865,175950,176189,185130,185577,190500,185574,179908,195007,205097,19596,206881,175802,192536,194463,187039,68865,21530,181110,180512,180510,184937,184939,184941,2850,184930,184933,184935,19015,187238,181083,182940,183441,195211,203968,203964,203966,203965,203443,203967,202607,202608,190563,191519,191209,190470,190479,175588,2708,2710,188441,140911,204279,193091,186591,181590,186619,205089,206586,205828,103774,19016,181876,181871,181872,181874,181873,181875,202198,186397,181757,83763,142181,178504,195118,203143,58369,195584,147557,195224,205554,3290,195274,194423,206391,2691,2690,2689,202702,186329,202136,202606,1560,179024,191179,203016,203015,204284,203061,203751,203014,177790,181085,205545,206754,207488,207485,207494,207486,207487,207489,207492,207493,207495,207484,24798,202745,32,195012,203090,89635,181589,187684,187685,187686,187687,195306,203403,203410,205582,202165,184310,188601,203285,203286,203287,203288,177264,184744,148516,148513,148514,148515,142088,202566,3240,180921,202081,126158,201975,2844,2845,2847,3715,2846,105578,202467,22246,321,182520,182599,184075,206952,182526,178087,187381,201977,36738,202212,201710,202337,50982,176484,176485,176486,176487,206724,189293,193092,185233,184947,205421,54,204967,194549,187032,195516,759,20725,206839,186733,204965,204015,179545,183050,187033,206562,187372,195518,182054,205416,190127,203184,142477,207255,175487,194997,205538,205826,204348,190643,184727,184726,184728,4608,375,180754,207190,203046,92013,161752,186272,184478,191576,190612,190613,190614,2716,2717,2718,190586,205197,202655,178144,190471,203450,188359,187670,187671,203197,203198,148506,206675,206674,207415,206832,206833,206834,206835,194204,202652,180436,206597,202542,201979,157936,193610,190718,190717,190719,205823,177287,176089,175970,187023,181620,180600,192941,103628,207089,207090,186912,179006,19877,195022,19603,19602,190455,190454,190453,204410,204880,179922,185562,141853,181098,188691,207189,193059,188502,188503,188501,203310,181626,179526,178204,187577,181686,187661,187660,187659,178195,190472,205889,205884,205886,205887,3658,206387,2907,337,205250,202875,2656,188351,181107,3661,195519,181627,1760,4406,193403,193404,193405,193406,2910,206563,186427,202650,180216,186467,186466,186404,186468,203307,206320,189983,192827,206292,206199,206289,206290,206291,153239,206786,188131,194213,187367,189288,190032,141596,186423,190473,195239,203264,187981,201705,205367,204281,19022,181239,201939,1765,186595,186587,186463,177624,180671,202421,164661,181897,191210,186450,183394,183395,183396,183397,2892,190836,2893";
	$go_entries_chests="3714,103815,123330,181665,178244,105176,184793,74447,121264,105570,179486,123214,129127,179487,3239,179488,179490,179491,20691,179492,131978,179493,179494,179496,179497,153468,179498,184931,184740,184936,184741,184940,191543,186648,3714,103815,123330,181665,178244,105176,184793,74447,121264,105570,179486,123214,129127,179487,3239,179488,179490,179491,20691,179492,131978,179493,179494,179496,179497,153468,179498,184931,184740,184936,184741,184940,191543,186648";
	$go_entries_herbs="181166,1618,1617,1619,1620,1621,1622,2045,1628,1623,1624,2042,2046,2041,2043,2044,2866,142140,142141,142142,142143,142144,142145,176583,176584,176588,176586,176587,176589,181270,181271,181275,181277,181276,181278,189973,181279,185881,191303,181280,181281,190169,190170,191019,190173,202749,202747,190171,202748,190172,190176,202750,202752,202751";
	$go_entries_minerals="188432,1731,191844,191845,188699,1610,1732,2653,73940,1733,1735,19903,1734,73941,2040,123310,123309,2047,165658,123848,324,177388,175404,181555,185877,181069,181068,181556,189978,181569,185557,181557,189979,189980,202736,189981,195036,202739,191133,202738,202741,202737,202740";
	$go_entries="$go_entries_containers,$go_entries_chests,$go_entries_herbs,$go_entries_minerals";
//	$go_entries="202065";
	$go_vect = explode( ",", $go_entries );
	rsort( $go_vect );
	foreach( $go_vect as $key => $t_entry )
		if( $t_entry && $t_entry < $last_id )
		{
			$f_last_id=fopen("last_id_go.txt","w");
			fputs($f_last_id,"$t_entry\n");
			fclose($f_last_id);

			$content = fetch_page("http://www.wowhead.com/object=$t_entry");
			$outf = fopen( "./wowhead GO/object=$t_entry.htm", "wt" );
			if( $outf )
			{
				fwrite( $outf, $content );
				fclose( $outf );
			}
		}

function fetch_page( $page )
{
	$ch = curl_init($page);
	curl_setopt ($ch, CURLOPT_AUTOREFERER, FALSE); 
	curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
	curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
	curl_setopt($ch,CURLOPT_HTTPHEADER,array (
        "User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.10 (KHTML, like Gecko) Chrome/8.0.552.215 Safari/534.10",
		"Accept-Language: en-US,en;q=0.8",
		"Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3",
		"Cookie: __utmz=186410998.1294997898.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __qca=P0-2061096298-1294997898413; __gads=ID=e442c96b7525ae24:T=1294998662:S=ALNI_MZLnMdNQRhhhw-RhRSrQQlBhpDQLg; enabledTest; __utma=186410998.2105000444.1294997898.1294997898.1294997898.1; __utmc=186410998; __utmb=186410998.4.9.1294997982710"
    ));
	curl_setopt($ch, CURLOPT_HEADER, 0);
	curl_setopt($ch,CURLOPT_RETURNTRANSFER,TRUE);
	$s = curl_exec($ch); 
	curl_close($ch); 

	return $s;
}
?>